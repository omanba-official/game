<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truth or Dare Game</title>
    <style>
        :root {
            --primary: #9c27b0;
            --secondary: #009688;
            --accent: #ffeb3b;
            --light: #f5f5f5;
            --dark: #333;
            --text-light: #fff;
            --text-dark: #212121;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
            transition: all 0.3s ease;
        }

        body {
            background-color: var(--light);
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        body.dark-mode {
            background-color: var(--dark);
            color: var(--text-light);
        }

        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }

        h1 {
            color: var(--primary);
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .dark-mode h1 {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .btn {
            padding: 15px 30px;
            margin: 10px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--text-light);
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: var(--text-light);
        }

        .btn-accent {
            background-color: var(--accent);
            color: var(--text-dark);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 1rem;
        }

        /* Card styles with flip animation */
        .card-container {
            perspective: 1000px;
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
        }

        .card {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            backface-visibility: hidden;
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-radius: 15px;
        }

        .card-front {
            background-color: var(--primary);
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
        }

        .card-back {
            background-color: white;
            color: var(--text-dark);
            transform: rotateY(180deg);
        }

        .dark-mode .card-back {
            background-color: #424242;
            color: var(--text-light);
        }

        .question {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .category-selector {
            margin: 20px 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        .category-btn {
            padding: 10px 20px;
            border-radius: 30px;
            background-color: #e0e0e0;
            border: none;
            cursor: pointer;
        }

        .dark-mode .category-btn {
            background-color: #616161;
            color: var(--text-light);
        }

        .category-btn.active {
            background-color: var(--primary);
            color: white;
        }

        .mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary);
        }

        .dark-mode .mode-toggle {
            color: var(--accent);
        }

        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .pulse {
            animation: pulse 0.5s;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .navigation-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }
            
            .btn {
                padding: 12px 24px;
                font-size: 1rem;
                margin: 8px;
            }
            
            .card {
                min-height: 200px;
                padding: 20px;
            }
            
            .question {
                font-size: 1.2rem;
            }
            
            .card-front {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <button class="mode-toggle" id="modeToggle">ðŸŒ“</button>
    
    <div class="container" id="welcomeScreen">
        <h1>Truth or Dare</h1>
        <button class="btn btn-primary" id="startGameBtn">Start Game</button>
    </div>

    <div class="container hidden" id="categoryScreen">
        <h1>Select Category</h1>
        <div class="category-selector">
            <button class="category-btn active" data-category="all">All</button>
            <button class="category-btn" data-category="kids">Kids</button>
            <button class="category-btn" data-category="teens">Teens</button>
            <button class="category-btn" data-category="adults">Adults</button>
        </div>
        <button class="btn btn-primary" id="confirmCategoryBtn">Continue</button>
    </div>

    <div class="container hidden" id="gameScreen">
        <h1>Truth or Dare</h1>
        <div id="choiceCard">
            <p>Choose your fate!</p>
            <div class="btn-group">
                <button class="btn btn-primary" id="truthBtn">Truth</button>
                <button class="btn btn-secondary" id="dareBtn">Dare</button>
            </div>
        </div>
        
        <div class="hidden" id="questionCard">
            <div class="card-container">
                <div class="card" id="flipCard">
                    <div class="card-face card-front" id="cardFront">
                        <span id="cardTypeText">Truth</span>
                    </div>
                    <div class="card-face card-back">
                        <p class="question" id="questionText"></p>
                    </div>
                </div>
            </div>
            <div class="navigation-buttons">
                <button class="btn btn-accent" id="prevBtn">Previous</button>
                <button class="btn btn-accent" id="nextBtn">Next</button>
            </div>
            <button class="btn btn-primary" id="backBtn">Back to Choices</button>
        </div>
    </div>

    <audio id="revealSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" preload="auto"></audio>
    <audio id="flipSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3" preload="auto"></audio>

    <script>
        // Game data
        const truths = {
            all: [
                "What is your most embarrassing moment?",
                "Have you ever lied to a friend?",
                "What's your biggest fear?",
                "If you could be invisible for a day, what would you do?",
                "What's the weirdest thing you've ever eaten?",
                "Have you ever pretended to be sick to get out of something?",
                "What's your guilty pleasure?",
                "If you could switch lives with someone for a day, who would it be?",
                "What's your biggest fear?",
                "Have you ever lied to your best friend?",
                "What's a secret you've never told anyone?",
                "Have you ever cheated on a test?",
                "What's the most embarrassing thing you've done?",
                "Have you ever had a crush on someone here?",
                "What's the last thing you Googled?",
                "Have you ever stolen something?",
                "What's your biggest insecurity?",
                "Have you ever ghosted someone?",
                "What's your worst habit?",
                "Have you ever broken a promise?",
                "Who was your first crush?",
                "Have you ever pretended to be sick?",
                "What's your guilty pleasure?",
                "What's the weirdest dream you've had?",
                "Do you talk in your sleep?",
                "Have you ever cried during a movie?",
                "Have you ever faked being happy?",
                "What's one thing you wish you could change about yourself?",
                "Have you ever stalked someone on social media?",
                "Do you have a hidden talent?",
                "What's your most childish habit?",
                "What's something you're ashamed of?",
                "Who do you admire most?",
                "What's your biggest regret?",
                "Have you ever sent a text to the wrong person?",
                "What's the worst lie you've ever told?",
                "Have you ever eavesdropped on someone?"
            ],
            kids: [
                "What's your least favorite vegetable?",
                "Have you ever hidden a bad grade from your parents?",
                "What's the silliest thing you've ever done?",
                "If you could make one rule that everyone had to follow, what would it be?",
                "What's something you're really bad at?",
                "Have you ever blamed a sibling for something you did?"
            ],
            teens: [
                "What's the most embarrassing song on your playlist?",
                "Have you ever had a crush on a teacher?",
                "What's the dumbest thing you've done to impress someone?",
                "Have you ever cheated on a test?",
                "What's something you're secretly really good at?",
                "Have you ever pretended to know a song when you didn't?"
            ],
            adults: [
                "What's the most irresponsible thing you've done as an adult?",
                "Have you ever called in sick to work when you weren't?",
                "What's your most controversial opinion?",
                "What's something you still do that's considered childish?",
                "Have you ever regifted a present?",
                "What's the biggest mistake you've made at work?"
            ]
        };

        const dares = {
            all: [
                "Sing a song out loud.",
                "Do 10 push-ups.",
                "Let someone else post on your social media.",
                "Do your best impression of a celebrity.",
                "Dance like nobody's watching for 30 seconds.",
                "Say the alphabet backwards.",
                "Wear your clothes inside out for the next round.",
                "Let the group give you a new hairstyle.",
                "Do 10 jumping jacks.",
                "Speak in an accent for the next 3 rounds.",
                "Say something nice to the person on your right.",
                "Eat a spoonful of something spicy.",
                "Pretend to be a cat for 1 minute.",
                "Call a friend and sing 'Happy Birthday'.",
                "Let someone send a message from your phone.",
                "Dance with no music for 30 seconds.",
                "Post an embarrassing photo.",
                "Let someone style your hair.",
                "Do a silly walk across the room.",
                "Tell a joke â€” if no one laughs, do a push-up.",
                "Let someone draw on your face.",
                "Share your last search history.",
                "Show your gallery's 3rd photo.",
                "Hold an ice cube in your hand until it melts.",
                "Eat a weird food combo.",
                "Act like a baby for 1 minute.",
                "Try to lick your elbow.",
                "Let someone tickle you for 30 seconds.",
                "Do 15 sit-ups.",
                "Say the alphabet backward.",
                "Let someone text your crush 'I like you.'",
                "Bark like a dog for 10 seconds."
            ],
            kids: [
                "Hop on one foot while singing 'Happy Birthday'.",
                "Do your best animal impression.",
                "Let someone tickle you for 10 seconds.",
                "Eat a spoonful of something weird (like ketchup and peanut butter).",
                "Wear socks on your hands for the next round.",
                "Do a silly walk to the door and back."
            ],
            teens: [
                "Text your crush with a silly message.",
                "Let someone style your hair however they want.",
                "Do your best TikTok dance.",
                "Eat a snack without using your hands.",
                "Let the group choose an embarrassing profile picture for you.",
                "Try to lick your elbow."
            ],
            adults: [
                "Call a friend and sing 'Happy Birthday' (even if it's not their birthday).",
                "Do a shot of hot sauce.",
                "Let someone give you a makeover with whatever they have on hand.",
                "Try to sell a random object to the group like it's an infomercial.",
                "Do an interpretive dance of your job.",
                "Let the group choose an embarrassing status for you to post."
            ]
        };

        // Game state
        let currentCategory = 'all';
        let isTruth = false;
        let currentQuestionIndex = 0;
        let currentQuestions = [];
        let usedIndices = [];

        // DOM elements
        const welcomeScreen = document.getElementById('welcomeScreen');
        const categoryScreen = document.getElementById('categoryScreen');
        const gameScreen = document.getElementById('gameScreen');
        const choiceCard = document.getElementById('choiceCard');
        const questionCard = document.getElementById('questionCard');
        const questionText = document.getElementById('questionText');
        const cardFront = document.getElementById('cardFront');
        const cardTypeText = document.getElementById('cardTypeText');
        const flipCard = document.getElementById('flipCard');
        const startGameBtn = document.getElementById('startGameBtn');
        const truthBtn = document.getElementById('truthBtn');
        const dareBtn = document.getElementById('dareBtn');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const backBtn = document.getElementById('backBtn');
        const confirmCategoryBtn = document.getElementById('confirmCategoryBtn');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const modeToggle = document.getElementById('modeToggle');
        const revealSound = document.getElementById('revealSound');
        const flipSound = document.getElementById('flipSound');

        // Event listeners
        startGameBtn.addEventListener('click', showCategoryScreen);
        truthBtn.addEventListener('click', () => showQuestion(true));
        dareBtn.addEventListener('click', () => showQuestion(false));
        nextBtn.addEventListener('click', showNextQuestion);
        prevBtn.addEventListener('click', showPreviousQuestion);
        backBtn.addEventListener('click', showChoiceScreen);
        confirmCategoryBtn.addEventListener('click', startGame);
        modeToggle.addEventListener('click', toggleDarkMode);

        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
            });
        });

        // Initialize dark mode from localStorage
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
        }

        // Functions
        function showCategoryScreen() {
            welcomeScreen.classList.add('hidden');
            categoryScreen.classList.remove('hidden');
            categoryScreen.classList.add('fade-in');
        }

        function startGame() {
            categoryScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            gameScreen.classList.add('fade-in');
            showChoiceScreen();
        }

        function showChoiceScreen() {
            questionCard.classList.add('hidden');
            choiceCard.classList.remove('hidden');
            choiceCard.classList.add('pulse');
            usedIndices = []; // Reset used questions when going back to choices
        }

        function showQuestion(isTruthQuestion) {
            isTruth = isTruthQuestion;
            const questions = isTruthQuestion ? truths : dares;
            cardTypeText.textContent = isTruthQuestion ? "TRUTH" : "DARE";
            
            // Set card color based on truth/dare
            cardFront.style.backgroundColor = isTruthQuestion ? "var(--primary)" : "var(--secondary)";
            
            // Get questions based on selected category
            if (currentCategory === 'all') {
                // Combine all categories
                currentQuestions = [];
                for (const category in questions) {
                    currentQuestions = currentQuestions.concat(questions[category]);
                }
            } else {
                currentQuestions = questions[currentCategory];
            }
            
            // Reset used indices if we've used them all
            if (usedIndices.length >= currentQuestions.length) {
                usedIndices = [];
            }
            
            // Get a random unused index
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * currentQuestions.length);
            } while (usedIndices.includes(randomIndex) && usedIndices.length < currentQuestions.length);
            
            usedIndices.push(randomIndex);
            currentQuestionIndex = randomIndex;
            
            // Show question card
            choiceCard.classList.add('hidden');
            questionCard.classList.remove('hidden');
            
            // Flip the card to show the question
            flipCard.classList.remove('flipped');
            setTimeout(() => {
                displayCurrentQuestion();
                flipCard.classList.add('flipped');
                flipSound.currentTime = 0;
                flipSound.play();
            }, 100);
        }

        function displayCurrentQuestion() {
            questionText.textContent = currentQuestions[currentQuestionIndex];
            // Disable previous button if we're at the first question
            prevBtn.disabled = usedIndices.length <= 1;
            // Disable next button if we've used all questions
            nextBtn.disabled = usedIndices.length >= currentQuestions.length;
        }

        function showNextQuestion() {
            if (usedIndices.length < currentQuestions.length) {
                // Get a random unused index
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * currentQuestions.length);
                } while (usedIndices.includes(randomIndex) && usedIndices.length < currentQuestions.length);
                
                usedIndices.push(randomIndex);
                currentQuestionIndex = randomIndex;
                
                // Flip animation
                flipCard.classList.remove('flipped');
                setTimeout(() => {
                    displayCurrentQuestion();
                    flipCard.classList.add('flipped');
                    flipSound.currentTime = 0;
                    flipSound.play();
                }, 300);
            }
        }

        function showPreviousQuestion() {
            if (usedIndices.length > 1) {
                // Remove current index
                usedIndices.pop();
                // Go to previous index
                currentQuestionIndex = usedIndices[usedIndices.length - 1];
                
                // Flip animation
                flipCard.classList.remove('flipped');
                setTimeout(() => {
                    displayCurrentQuestion();
                    flipCard.classList.add('flipped');
                    flipSound.currentTime = 0;
                    flipSound.play();
                }, 300);
            }
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            
            // Save preference to localStorage
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
            } else {
                localStorage.setItem('darkMode', 'disabled');
            }
        }
    </script>
</body>
</html>